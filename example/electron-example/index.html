<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Go ipc nodejs client test</title>
</head>

<body>
  <h1> Status: <span id="status" style="color:red"> Waiting for the server to connect</span> </h1>
  <h2> Counter: <span id="counter">0</span> </h2>


  <button type="button" onclick="reset()">Reset</button>

  <input id="number" type="number"></input>
  <button type="button" onclick="set()">Set</button>


</body>
<script>

  const { ipcRenderer } = require('electron')

  // changes the status message displayed when a connection is made or lost with the go server
  ipcRenderer.on('status', (event, message) => {
    if (message == "Connected") {
      document.getElementById("status").style.color = "green"
    } else {
      document.getElementById("status").style.color = "red"
    }
    document.getElementById("status").innerHTML = message
  })


  // sets the value of the go server counter 
  ipcRenderer.on('counter', (event, number) => {
    document.getElementById("counter").innerHTML = number
  })
   
  // sends a message that resets the counter in the go process
  function reset() {
    console.log(ipcRenderer.sendSync('reset'))
  }
  // sends a number to the go process that is used to change the counter
  function set() {

    var val = document.getElementById("number").value
    console.log(ipcRenderer.sendSync('set', val))
  }

</script>


</html>